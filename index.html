---
layout: default
---

<body>
    <div id="app">
        <div v-for="rows in gridList" style="text-align: center;">
            <div v-for="book in rows" v-if="book != null" class="card book_item"
                v-bind:style="{ backgroundColor: book.bookCoverColor, color: book.bookTitleTextColor }"
                @click="bookClick(book.bookLink)">
                <span class="book_title">[[ book.bookTitle ]]</span>
                <div style="display: flex; flex-direction: row;">
                    <span style="flex: 1;"></span>
                    <img v-bind:style="{ height: book.bookIconHeight }" v-bind:src="book.bookIcon" />
                    <span style="flex: 1;"></span>
                </div>
                <p class="book_sub_title" v-bind:style="{ color: book.bookSubTitleTextColor }">[[ book.bookSubTitle ]]</p>
            </div>
        </div>
    </div>
</body>

<script>

    new Vue({
        el: '#app',
        delimiters:['[[', ']]'],        // jekyll에서 사용하는 {{ }}와 겹치기 때문에 임의로 다르게 정의
        data: {
            bookList: [],
            gridList: [],
            gridMaxCount: 5,
        },
        created: function () {
            this.getBookList();
            window.addEventListener('resize', this.onResizeWindow);
        },
        destroyed: function() {
            window.removeEventListener('resize', this.onResizeWindow)
        },
        methods: {
            getBookList: function () {
                let self = this;
                axios.get('bookList.json')
                    .then(function (result) {
                        self.bookList = result.data;
                        self.makeGridList();
                    }).catch(function (e) {
                        console.error(e);
                    });
            },
            makeGridList: function() {
                var self =this;
                var remain = this.bookList.length % self.gridMaxCount;            
                var lines = this.bookList.length / self.gridMaxCount;
                if (remain != 0) {
                    lines = lines + 1;
                }
                lines = Math.floor(lines);
                
                for (var i = 0; i < lines; i++) {
                    var subList = self.bookList.slice((i * self.gridMaxCount), (i * self.gridMaxCount) + self.gridMaxCount);
                    if (subList.length < self.gridMaxCount) {
                        var loopCount = self.gridMaxCount - subList.length;
                        for (var j = 0; j < loopCount; j++) {
                            subList.push(null);
                        }
                    }
                    self.gridList.push(subList);
                }
            },
            bookClick: function (bookLink) {
                location.href = bookLink;
            },
            onResizeWindow: function() {
                if (window.innerWidth > 960) {
                    this.gridMaxCount = 5;
                } else {
                    this.gridMaxCount = 3;
                }
            }
        },
    });
</script>

<style>

    /* default 레이아웃의 속성 초기화 시작 */
    .wrapper { 
        margin: 0px;
        max-width: 100%;
        min-width: 100%;
    }

    div {
        width: 100%;
    }

    body {
        font-size: 15px;
        background-color: #FAFAFA;
    }

    /* default 레이아웃의 속성 초기화 끝 */
    

    .book_list {
        width: 80%;
    }

    .book_item {
        height: 300px;
        width: 250px;
        padding: 20px;
        margin: 0px 20px 20px 0px;
        display: inline-block;
        vertical-align: top;
        position: relative;
        text-align: left;
    }

    .book_title {
        font-size: 25px;
        margin-bottom: 30px;
        display: inline-block;
    }

    .book_sub_title {
        font-size: 13px;
        margin-bottom: 30px;
        right: 20px;
        bottom: 0px;
        position: absolute;
    }
</style>
