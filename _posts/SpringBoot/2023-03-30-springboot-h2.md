---
layout: post
title: "[Spring Boot] H2 데이터베이스 사용하기"
date: "2023-03-30 16:03"
updated: []
categories: [SpringBoot]
tags: [H2, Database]
---

**1. build.gralde에 의존성 추가**
```java
dependencies {
	runtimeOnly 'com.h2database:h2'
    // 테스트를 위해 JPA도 추가
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    ...
}
```
<br>
**2. application.properties에 설정 추가**
```shell
# H2 Console 접속 설정

# H2 Console 사용 여부
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# H2 DB 설정
spring.datasource.driverClassName=org.h2.Driver
# H2 접속 정보, 윈도우의 경우 "C:/Users/사용자" 경로에 저장됨
spring.datasource.url=jdbc:h2:~/test
# H2 접속 시 사용할 username
spring.datasource.username=sa
# H2 접속 시 사용할 password
spring.datasource.password=

# 테스트를 위해 JPA 추가 설정
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.show_sql=true
spring.jpa.hibernate.ddl-auto=create
```
<br>
**3. 테스트 할 Entity 생성**
```java
// Student.java
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

@Entity
public class Student {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    private String name;
    private int age;
}
```
<br>
**4. Spring Application 실행**<br>
실행하면 아래와 같은 로그가 조회됨
```log
INFO 11412 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:~/test'
INFO 11412 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
INFO 11412 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.15.Final
INFO 11412 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
INFO 11412 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
Hibernate: 
    
    drop table if exists student CASCADE 
Hibernate: 
    
    create table student (
       id integer generated by default as identity,
        age integer not null,
        name varchar(255),
        primary key (id)
    )
```
<br>
**5. h2-console**<br>
`http://localhost:포트번호/h2-console`에 접속 정보를 입력한 다음 Connect 버튼을 누르면 테이블을 확인할 수 있다.
<p align="center"><img src="/assets/img/posts/springboot-h2-1.png" alt="springboot-h2-1"></p>
<p align="center"><img src="/assets/img/posts/springboot-h2-2.png" alt="springboot-h2-2"></p>